#
# products
#

query getProductPageData($id: ID, $name: String) {
  products(id: $id, name: $name) {
    id
    name
    yahooAuctionCrawlSetting {
      id
      productId
      keyword
      categoryId
      minPrice
      maxPrice
      enabled
    }
    mercariCrawlSetting {
      id
      productId
      keyword
      categoryId
      minPrice
      maxPrice
      enabled
    }
    janparaCrawlSetting {
      id
      productId
      keyword
      minPrice
      maxPrice
      enabled
    }
  }
}

query getProductDetailPageData(
  $id: ID!
  $platformMask: String!
  $published: Boolean!
  $yahooAuctionBuyable: Boolean!
  $page: Int
  $per: Int
  $sort: String
  $order: String
) {
  product(id: $id) {
    id
    name
    yahooAuctionCrawlSetting {
      id
      keyword
      categoryId
      minPrice
      maxPrice
      enabled
      yahooAuctionCrawlSettingExcludeKeywords {
        id
        yahooAuctionCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
      yahooAuctionCrawlSettingRequiredKeywords {
        id
        yahooAuctionCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
    }
    yahooAuctionDailyPurchaseSummaries {
      id
      productId
      averagePurchasePrice
      purchaseCount
      date
      createdAt
      updatedAt
    }
    yahooFleamarketDailyPurchaseSummaries {
      id
      productId
      averagePurchasePrice
      purchaseCount
      date
      createdAt
      updatedAt
    }
    mercariCrawlSetting {
      id
      productId
      keyword
      categoryId
      minPrice
      maxPrice
      enabled
      mercariCrawlSettingExcludeKeywords {
        id
        mercariCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
      mercariCrawlSettingRequiredKeywords {
        id
        mercariCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
    }
    mercariDailyPurchaseSummaries {
      id
      productId
      averagePurchasePrice
      purchaseCount
      date
      createdAt
      updatedAt
    }
    janparaCrawlSetting {
      id
      productId
      keyword
      minPrice
      maxPrice
      enabled
      janparaCrawlSettingExcludeKeywords {
        id
        janparaCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
      janparaCrawlSettingRequiredKeywords {
        id
        janparaCrawlSettingId
        keyword
        createdAt
        updatedAt
      }
    }
    relatedProducts(
      platformMask: $platformMask
      published: $published
      yahooAuctionBuyable: $yahooAuctionBuyable
      page: $page
      per: $per
      sort: $sort
      order: $order
    ) {
      platform
      productId
      externalId
      name
      thumbnailUrl
      price
      buyoutPrice
      published
      boughtDate
      endDate
      createdAt
      updatedAt
    }
  }
}

#
# recommends
#

query getRecommendsPageData($id: ID, $name: String) {
  products(id: $id, name: $name) {
    id
    name
    relatedProducts(
      platformMask: "yahoo_auction,yahoo_fleamarket,mercari,janpara"
      published: true
      yahooAuctionBuyable: true
      page: 1
      per: 10
      sort: "updated_at"
      order: "desc"
    ) {
      platform
      productId
      externalId
      name
      thumbnailUrl
      price
      buyoutPrice
      published
      boughtDate
      endDate
      createdAt
      updatedAt
    }
  }
}
