#
# queries
#

# /products

query getProductPageData($id: ID, $name: String) {
  products(id: $id, name: $name) {
    ...ProductField
    yahooAuctionCrawlSetting {
      ...YahooAuctionCrawlSettingField
    }
    mercariCrawlSetting {
      ...MercariCrawlSettingField
    }
    janparaCrawlSetting {
      ...JanparaCrawlSettingField
    }
    iosysCrawlSetting {
      ...IosysCrawlSettingField
    }
    pcKoubouCrawlSetting {
      ...PcKoubouCrawlSettingField
    }
    usedSofmapCrawlSetting {
      ...UsedSofmapCrawlSettingField
    }
  }
}

# /products/:id

query getProductDetailPageData(
  $id: ID!
  $platformMask: String!
  $page: Int
  $per: Int
  $sort: String
  $order: String
) {
  product(id: $id) {
    ...ProductField
    yahooAuctionCrawlSetting {
      ...YahooAuctionCrawlSettingField
      yahooAuctionCrawlSettingExcludeKeywords {
        ...YahooAuctionCrawlSettingExcludeKeywordField
      }
      yahooAuctionCrawlSettingExcludeProducts {
        ...YahooAuctionCrawlSettingExcludeProductField
      }
      yahooAuctionCrawlSettingRequiredKeywords {
        ...YahooAuctionCrawlSettingRequiredKeywordField
      }
    }
    yahooAuctionDailyPurchaseSummaries {
      ...YahooAuctionDailyPurchaseSummaryField
    }
    yahooFleamarketDailyPurchaseSummaries {
      ...YahooFleamarketDailyPurchaseSummaryField
    }
    mercariCrawlSetting {
      ...MercariCrawlSettingField
      mercariCrawlSettingExcludeKeywords {
        ...MercariCrawlSettingExcludeKeywordField
      }
      mercariCrawlSettingExcludeProducts {
        ...MercariCrawlSettingExcludeProductField
      }
      mercariCrawlSettingRequiredKeywords {
        ...MercariCrawlSettingRequiredKeywordField
      }
    }
    mercariDailyPurchaseSummaries {
      ...MercariDailyPurchaseSummaryField
    }
    janparaCrawlSetting {
      ...JanparaCrawlSettingField
      janparaCrawlSettingExcludeKeywords {
        ...JanparaCrawlSettingExcludeKeywordField
      }
      janparaCrawlSettingExcludeProducts {
        ...JanparaCrawlSettingExcludeProductField
      }
      janparaCrawlSettingRequiredKeywords {
        ...JanparaCrawlSettingRequiredKeywordField
      }
    }
    iosysCrawlSetting {
      ...IosysCrawlSettingField
      iosysCrawlSettingExcludeKeywords {
        ...IosysCrawlSettingExcludeKeywordField
      }
      iosysCrawlSettingExcludeProducts {
        ...IosysCrawlSettingExcludeProductField
      }
      iosysCrawlSettingRequiredKeywords {
        ...IosysCrawlSettingRequiredKeywordField
      }
    }
    pcKoubouCrawlSetting {
      ...PcKoubouCrawlSettingField
      pcKoubouCrawlSettingExcludeKeywords {
        ...PcKoubouCrawlSettingExcludeKeywordField
      }
      pcKoubouCrawlSettingExcludeProducts {
        ...PcKoubouCrawlSettingExcludeProductField
      }
      pcKoubouCrawlSettingRequiredKeywords {
        ...PcKoubouCrawlSettingRequiredKeywordField
      }
    }
    usedSofmapCrawlSetting {
      ...UsedSofmapCrawlSettingField
      usedSofmapCrawlSettingExcludeKeywords {
        ...UsedSofmapCrawlSettingExcludeKeywordField
      }
      usedSofmapCrawlSettingExcludeProducts {
        ...UsedSofmapCrawlSettingExcludeProductField
      }
      usedSofmapCrawlSettingRequiredKeywords {
        ...UsedSofmapCrawlSettingRequiredKeywordField
      }
    }
    relatedProducts(
      platformMask: $platformMask
      page: $page
      per: $per
      sort: $sort
      order: $order
    ) {
      ...RelatedProductField
    }
  }
}

# /products/:id/settings

query getProductSettingPageData($id: ID!) {
  product(id: $id) {
    ...ProductField
    yahooAuctionCrawlSetting {
      ...YahooAuctionCrawlSettingField
      yahooAuctionCrawlSettingExcludeKeywords {
        ...YahooAuctionCrawlSettingExcludeKeywordField
      }
      yahooAuctionCrawlSettingExcludeProducts {
        ...YahooAuctionCrawlSettingExcludeProductField
      }
      yahooAuctionCrawlSettingRequiredKeywords {
        ...YahooAuctionCrawlSettingRequiredKeywordField
      }
    }
    yahooAuctionDailyPurchaseSummaries {
      ...YahooAuctionDailyPurchaseSummaryField
    }
    yahooFleamarketDailyPurchaseSummaries {
      ...YahooFleamarketDailyPurchaseSummaryField
    }
    mercariCrawlSetting {
      ...MercariCrawlSettingField
      mercariCrawlSettingExcludeKeywords {
        ...MercariCrawlSettingExcludeKeywordField
      }
      mercariCrawlSettingExcludeProducts {
        ...MercariCrawlSettingExcludeProductField
      }
      mercariCrawlSettingRequiredKeywords {
        ...MercariCrawlSettingRequiredKeywordField
      }
    }
    mercariDailyPurchaseSummaries {
      ...MercariDailyPurchaseSummaryField
    }
    janparaCrawlSetting {
      ...JanparaCrawlSettingField
      janparaCrawlSettingExcludeKeywords {
        ...JanparaCrawlSettingExcludeKeywordField
      }
      janparaCrawlSettingExcludeProducts {
        ...JanparaCrawlSettingExcludeProductField
      }
      janparaCrawlSettingRequiredKeywords {
        ...JanparaCrawlSettingRequiredKeywordField
      }
    }
    iosysCrawlSetting {
      ...IosysCrawlSettingField
      iosysCrawlSettingExcludeKeywords {
        ...IosysCrawlSettingExcludeKeywordField
      }
      iosysCrawlSettingExcludeProducts {
        ...IosysCrawlSettingExcludeProductField
      }
      iosysCrawlSettingRequiredKeywords {
        ...IosysCrawlSettingRequiredKeywordField
      }
    }
    pcKoubouCrawlSetting {
      ...PcKoubouCrawlSettingField
      pcKoubouCrawlSettingExcludeKeywords {
        ...PcKoubouCrawlSettingExcludeKeywordField
      }
      pcKoubouCrawlSettingExcludeProducts {
        ...PcKoubouCrawlSettingExcludeProductField
      }
      pcKoubouCrawlSettingRequiredKeywords {
        ...PcKoubouCrawlSettingRequiredKeywordField
      }
    }
    usedSofmapCrawlSetting {
      ...UsedSofmapCrawlSettingField
      usedSofmapCrawlSettingExcludeKeywords {
        ...UsedSofmapCrawlSettingExcludeKeywordField
      }
      usedSofmapCrawlSettingExcludeProducts {
        ...UsedSofmapCrawlSettingExcludeProductField
      }
      usedSofmapCrawlSettingRequiredKeywords {
        ...UsedSofmapCrawlSettingRequiredKeywordField
      }
    }
  }
}

# /recommends

query getRecommendsPageData($id: ID, $name: String) {
  products(id: $id, name: $name) {
    id
    name
    relatedProducts(
      platformMask: "yahoo_auction.buyable,yahoo_fleamarket.published,mercari.published,janpara.all,iosys.all,pc_koubou.all,used_sofmap.all"
      page: 1
      per: 10
      sort: "price"
      order: "asc"
    ) {
      ...RelatedProductField
    }
  }
}

#
# fragments
#

# YahooAuction

fragment ProductField on Product {
  id
  name
}

fragment YahooAuctionCrawlSettingField on YahooAuctionCrawlSetting {
  id
  productId
  keyword
  categoryId
  minPrice
  maxPrice
  enabled
}

fragment YahooAuctionCrawlSettingExcludeKeywordField on YahooAuctionCrawlSettingExcludeKeyword {
  id
  yahooAuctionCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment YahooAuctionCrawlSettingExcludeProductField on YahooAuctionCrawlSettingExcludeProduct {
  id
  yahooAuctionCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment YahooAuctionCrawlSettingRequiredKeywordField on YahooAuctionCrawlSettingRequiredKeyword {
  id
  yahooAuctionCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment YahooAuctionDailyPurchaseSummaryField on YahooAuctionDailyPurchaseSummary {
  id
  productId
  averagePurchasePrice
  purchaseCount
  date
  createdAt
  updatedAt
}

# YahooFleamarket

fragment YahooFleamarketDailyPurchaseSummaryField on YahooFleamarketDailyPurchaseSummary {
  id
  productId
  averagePurchasePrice
  purchaseCount
  date
  createdAt
  updatedAt
}

fragment MercariCrawlSettingField on MercariCrawlSetting {
  id
  productId
  keyword
  categoryId
  minPrice
  maxPrice
  enabled
}

fragment JanparaCrawlSettingField on JanparaCrawlSetting {
  id
  productId
  keyword
  minPrice
  maxPrice
  enabled
}

fragment IosysCrawlSettingField on IosysCrawlSetting {
  id
  productId
  keyword
  minPrice
  maxPrice
  enabled
}

fragment PcKoubouCrawlSettingField on PcKoubouCrawlSetting {
  id
  productId
  keyword
  minPrice
  maxPrice
  enabled
}

fragment UsedSofmapCrawlSettingField on UsedSofmapCrawlSetting {
  id
  productId
  keyword
  minPrice
  maxPrice
  enabled
}

# Mercari

fragment MercariCrawlSettingExcludeKeywordField on MercariCrawlSettingExcludeKeyword {
  id
  mercariCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment MercariCrawlSettingExcludeProductField on MercariCrawlSettingExcludeProduct {
  id
  mercariCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment MercariCrawlSettingRequiredKeywordField on MercariCrawlSettingRequiredKeyword {
  id
  mercariCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment MercariDailyPurchaseSummaryField on MercariDailyPurchaseSummary {
  id
  productId
  averagePurchasePrice
  purchaseCount
  date
  createdAt
  updatedAt
}

# Janpara

fragment JanparaCrawlSettingExcludeKeywordField on JanparaCrawlSettingExcludeKeyword {
  id
  janparaCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment JanparaCrawlSettingExcludeProductField on JanparaCrawlSettingExcludeProduct {
  id
  janparaCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment JanparaCrawlSettingRequiredKeywordField on JanparaCrawlSettingRequiredKeyword {
  id
  janparaCrawlSettingId
  keyword
  createdAt
  updatedAt
}

# Iosys

fragment IosysCrawlSettingExcludeKeywordField on IosysCrawlSettingExcludeKeyword {
  id
  iosysCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment IosysCrawlSettingExcludeProductField on IosysCrawlSettingExcludeProduct {
  id
  iosysCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment IosysCrawlSettingRequiredKeywordField on IosysCrawlSettingRequiredKeyword {
  id
  iosysCrawlSettingId
  keyword
  createdAt
  updatedAt
}

# PcKoubou

fragment PcKoubouCrawlSettingExcludeKeywordField on PcKoubouCrawlSettingExcludeKeyword {
  id
  pcKoubouCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment PcKoubouCrawlSettingExcludeProductField on PcKoubouCrawlSettingExcludeProduct {
  id
  pcKoubouCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment PcKoubouCrawlSettingRequiredKeywordField on PcKoubouCrawlSettingRequiredKeyword {
  id
  pcKoubouCrawlSettingId
  keyword
  createdAt
  updatedAt
}

# UsedSofmap

fragment UsedSofmapCrawlSettingExcludeKeywordField on UsedSofmapCrawlSettingExcludeKeyword {
  id
  usedSofmapCrawlSettingId
  keyword
  createdAt
  updatedAt
}

fragment UsedSofmapCrawlSettingExcludeProductField on UsedSofmapCrawlSettingExcludeProduct {
  id
  usedSofmapCrawlSettingId
  externalId
  createdAt
  updatedAt
}

fragment UsedSofmapCrawlSettingRequiredKeywordField on UsedSofmapCrawlSettingRequiredKeyword {
  id
  usedSofmapCrawlSettingId
  keyword
  createdAt
  updatedAt
}

# RelatedProduct

fragment RelatedProductField on RelatedProduct {
  platform
  productId
  externalId
  name
  thumbnailUrl
  price
  buyoutPrice
  published
  boughtDate
  endDate
  createdAt
  updatedAt
}
